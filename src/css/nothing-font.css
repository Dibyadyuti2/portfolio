/* --- Nothing Font (Dot Matrix) - Refactored --- */

/* Core Principles:
  1. CSS Custom Properties (--variable) for a single source of truth.
  2. No `!important` needed due to a clean, component-based structure.
  3. `calc()` for dynamic and proportional sizing (e.g., row height depends on dot size).
  4. Modular size classes (.nothing-font--small) instead of styling h1/h2 tags directly.
*/

:root {
  /* Define theme colors for easy dark/light mode switching */
  --nothing-font-color: #000;
  --nothing-focus-color: #FF4B2B;
}

body.dark-mode {
  --nothing-font-color: #fff;
}

.nothing-font {
  /* --- Control Panel using CSS Variables --- */
  /* These are the default values (equivalent to a medium size) */
  --dot-size: 4px;
  --dot-margin: 1px;
  --letter-spacing: 8px; /* Space between letters */

  /* --- Base Component Styles --- */
  font-family: 'DotMatrix', monospace; /* Fallback font */
  position: relative;
  display: block;
  user-select: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color: var(--nothing-font-color);
}

/* Hide original text but keep it for screen readers and SEO */
.nothing-font .original-text {
  position: absolute;
  width: 1px;
  height: 1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Base styles for the building blocks */
.dot-matrix {
  display: inline-block;
  vertical-align: top;
  contain: layout style paint; /* Performance optimization */
}

.letter {
  display: inline-block;
  vertical-align: top;
  margin-right: var(--letter-spacing);
}
.letter:last-child {
  margin-right: 0;
}

.dot-row {
  display: block;
  white-space: nowrap;
  margin: 0;
  padding: 0;
  /* Row height is calculated dynamically based on dot size and margin */
  height: calc(var(--dot-size) + (var(--dot-margin) * 2));
  line-height: calc(var(--dot-size) + (var(--dot-margin) * 2));
}

.dot {
  display: inline-block;
  vertical-align: middle;
  background: currentColor;
  border-radius: 50%;
  opacity: 0;
  transform: scale(0.8);
  /* Sizing is now controlled by variables */
  width: var(--dot-size);
  height: var(--dot-size);
  margin: var(--dot-margin);
  /* Animation */
  animation: dotFadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.dot.empty {
  background: transparent;
  animation: none;
  opacity: 0;
}

/* --- Size Modifier Classes --- */
/* To change the size, just apply one of these classes. */

.nothing-font--small {
  --dot-size: 2px;
  --dot-margin: 0.5px;
  --letter-spacing: 4px;
}

.nothing-font--medium { /* Default size */
  --dot-size: 4px;
  --dot-margin: 1px;
  --letter-spacing: 8px;
}

.nothing-font--large {
  --dot-size: 8px;
  --dot-margin: 2px;
  --letter-spacing: 16px;
}

.nothing-font--xl { /* For hero titles */
  --dot-size: 16px;
  --dot-margin: 4px;
  --letter-spacing: 32px;
}


/* --- Responsive Sizing --- */
/* On smaller screens, we just update the variables for larger font sizes. */

@media (max-width: 768px) {
  .nothing-font--large {
    --dot-size: 6px;
    --dot-margin: 1.5px;
    --letter-spacing: 12px;
  }
  .nothing-font--xl {
    --dot-size: 12px;
    --dot-margin: 3px;
    --letter-spacing: 24px;
  }
}

@media (max-width: 480px) {
  .nothing-font--medium {
    --dot-size: 3px;
    --dot-margin: 0.5px;
    --letter-spacing: 6px;
  }
  .nothing-font--large {
    --dot-size: 5px;
    --dot-margin: 1.2px;
    --letter-spacing: 10px;
  }
  .nothing-font--xl {
    --dot-size: 8px;
    --dot-margin: 2px;
    --letter-spacing: 16px;
  }
}


/* --- States & Accessibility --- */

/* Animation */
@keyframes dotFadeIn {
  from {
    opacity: 0;
    transform: scale(0.6) translateY(2px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* Loading state */
.nothing-font.loading .dot {
  animation-play-state: paused;
  opacity: 0.3;
}

.nothing-font.loaded .dot {
  animation-play-state: running;
}

/* Focus styles for keyboard navigation */
.nothing-font:focus {
  outline: 2px solid var(--nothing-focus-color);
  outline-offset: 4px;
  border-radius: 4px;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .dot {
    animation: none;
    opacity: 1;
    transform: none;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .nothing-font .dot {
    border: 1px solid currentColor;
  }
}